{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-0598\"],{\"/gXl\":function(e,t,n){\"use strict\";n.d(t,\"d\",function(){return r}),n.d(t,\"b\",function(){return i}),n.d(t,\"c\",function(){return d}),n.d(t,\"e\",function(){return l}),n.d(t,\"a\",function(){return o});var a=n(\"t3Un\"),r=function(e){return Object(a.a)({url:\"/dept\",method:\"post\",data:e})},i=function(){return Object(a.a)({url:\"/dept\",method:\"get\"})},d=function(){return Object(a.a)({url:\"/dept/tree\",method:\"get\"})},l=function(e){return Object(a.a)({url:\"/dept\",method:\"put\",data:e})},o=function(e){return Object(a.a)({url:\"/dept/\"+e,method:\"delete\"})}},\"1CLE\":function(e,t,n){},\"1Xwi\":function(e,t,n){},\"5lkm\":function(e,t,n){\"use strict\";n.r(t);var a=n(\"nOKp\"),r=n(\"itRl\"),i=n(\"/gXl\"),d=n(\"7Qib\"),l={components:{PopupTreeInput:a.a,treeTable:r.a},data:function(){return{deptForm:{deptId:0,name:\"\",parentId:0,parentName:\"\",sort:0},tableTreeData:[],dataRule:{name:[{required:!0,message:\"机构名称不能为空\",trigger:\"blur\"}],parentName:[{required:!0,message:\"上级机构不能为空\",trigger:\"change\"}]},popupTreeData:[],popupTreeProps:{label:\"name\",children:\"children\"},editLoading:!1,deptName:\"\"}},created:function(){this.findTreeData()},methods:{parseTime:d.b,handleNodeClick:function(e){console.log(e),this.deptForm=e,this.$refs.deptForm.clearValidate()},handleFind:function(){this.findTreeData()},handleNumChange:function(e){this.deptForm.sort=e},handleAdd:function(){if(0===this.deptForm.deptId)this.$message({message:\"请先选择一个节点哦\",type:\"warning\"});else{var e=this.deptForm.deptId,t=this.deptForm.name;this.deptForm={deptId:0,name:\"\",parentId:e,parentName:t,sort:0}}},findTreeData:function(){var e=this;this.loading=!0,Object(i.b)().then(function(t){e.tableTreeData=t.data.data,e.popupTreeData=e.getParentMenuTree(t.data.data),e.loading=!1})},getParentMenuTree:function(e){return[{parentId:0,name:\"顶级菜单\",children:e}]},handleTreeSelectChange:function(e){this.deptForm.parentId=e.deptId,this.deptForm.parentName=e.name},submitEditForm:function(){var e=this;this.$refs.deptForm.validate(function(t){t&&(e.deptForm.deptId?e.$confirm(\"确认提交吗？\",\"提示\",{}).then(function(){e.editLoading=!0,Object(i.e)(e.deptForm).then(function(t){200===t.data.code?e.$message({message:\"操作成功\",type:\"success\"}):e.$message({message:t.data.msg,type:\"error\"}),e.editLoading=!1,e.$refs.deptForm.clearValidate(),e.findTreeData()})}):(console.log(e.deptForm),e.$confirm(\"确认提交吗？\",\"提示\",{}).then(function(){e.editLoading=!0,Object(i.d)(e.deptForm).then(function(t){200===t.data.code?e.$message({message:\"操作成功\",type:\"success\"}):e.$message({message:t.data.msg,type:\"error\"}),e.editLoading=!1,e.$refs.deptForm.clearValidate(),e.findTreeData()})})))})},handleDelete:function(){var e=this,t=this;0===t.deptForm.deptId?this.$message({message:\"请先选择一个部门哦\",type:\"warning\"}):this.$confirm(\"此操作将把部门删除, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(i.a)(e.deptForm.deptId).then(function(n){200===n.data.code?(e.$message({type:\"success\",message:\"操作成功\"}),t.findTreeData()):e.$message({message:res.data.msg,type:\"error\"})})}).catch(function(){e.$message({type:\"info\",message:\"已取消删除\"})})}}},o=(n(\"ZMxU\"),n(\"KHd+\")),s=Object(o.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"dept\"},[n(\"el-row\",{attrs:{gutter:10}},[n(\"el-col\",{attrs:{xs:24,sm:12}},[n(\"div\",{staticClass:\"app-container\"},[n(\"div\",{staticClass:\"filter-container\"},[n(\"el-button-group\",[n(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:e.handleAdd}},[e._v(\"\\n              添加\\n            \")]),e._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:e.handleDelete}},[e._v(\"\\n              删除\\n            \")])],1)],1),e._v(\" \"),n(\"el-tree\",{attrs:{data:e.tableTreeData,props:e.popupTreeProps,\"default-expand-all\":!0},on:{\"node-click\":e.handleNodeClick}})],1)]),e._v(\" \"),n(\"el-col\",{attrs:{xs:24,sm:12}},[n(\"el-card\",{staticClass:\"box-card\"},[n(\"div\",{staticClass:\"clearfix\",attrs:{slot:\"header\"},slot:\"header\"},[n(\"span\",[e._v(e._s(\"\"===e.deptForm.deptId?\"添加\":\"编辑\"))])]),e._v(\" \"),n(\"div\",[n(\"el-form\",{ref:\"deptForm\",attrs:{model:e.deptForm,rules:e.dataRule,\"label-position\":\"right\",\"label-width\":\"100px\"}},[n(\"el-form-item\",{attrs:{label:\"上级编号\",prop:\"parentId\"}},[n(\"popup-tree-input\",{attrs:{data:e.popupTreeData,props:e.popupTreeProps,prop:null==e.deptForm.parentName?\"顶级菜单\":e.deptForm.parentName,\"node-key\":\"\"+e.deptForm.parentId,\"current-change-handle\":e.handleTreeSelectChange}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"部门名称\",prop:\"name\"}},[n(\"el-input\",{model:{value:e.deptForm.name,callback:function(t){e.$set(e.deptForm,\"name\",t)},expression:\"deptForm.name\"}})],1),e._v(\" \"),n(\"el-form-item\",{attrs:{label:\"排序\",prop:\"sort\"}},[n(\"el-input-number\",{attrs:{min:0,max:100},on:{change:e.handleNumChange},model:{value:e.deptForm.sort,callback:function(t){e.$set(e.deptForm,\"sort\",t)},expression:\"deptForm.sort\"}})],1)],1)],1)]),e._v(\" \"),n(\"el-card\",{staticClass:\"box-card\",staticStyle:{\"margin-top\":\"-2rem\"}},[n(\"el-row\",[n(\"el-col\",{staticStyle:{\"text-align\":\"right\"},attrs:{span:24}},[n(\"el-button\",{attrs:{type:\"primary\",plain:\"\",loading:e.editLoading},on:{click:e.submitEditForm}},[e._v(e._s(\"\"==e.deptForm.deptId?\"添加\":\"编辑\")+\"\\n            \")])],1)],1)],1)],1)],1)],1)},[],!1,null,\"95b753c6\",null);s.options.__file=\"dept.vue\";t.default=s.exports},ZMxU:function(e,t,n){\"use strict\";var a=n(\"1CLE\");n.n(a).a},itRl:function(e,t,n){\"use strict\";var a=n(\"4d7F\"),r=n.n(a),i=n(\"Kw5r\");function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.parent,a=void 0===n?null:n,r=t.preIndex,l=void 0!==r&&r,o=t.level,s=void 0===o?0:o,c=t.expand,p=void 0!==c&&c,u=t.children,h=void 0===u?\"children\":u,m=t.show,f=void 0===m||m,g=t.select,v=void 0!==g&&g;e.forEach(function(e,t){var n=(l?l+\"-\"+t:t)+\"\";i.default.set(e,\"_id\",n),i.default.set(e,\"_level\",s),i.default.set(e,\"_expand\",p),i.default.set(e,\"_parent\",a),i.default.set(e,\"_show\",f),i.default.set(e,\"_select\",v),e[h]&&e[h].length>0&&d(e[h],{parent:e,level:s+1,expand:p,preIndex:n,children:h,status:status,select:v})})}var l={name:\"TreeTable\",props:{data:{type:Array,required:!0,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},defaultExpandAll:{type:Boolean,default:!1},defaultChildren:{type:String,default:\"children\"},indent:{type:Number,default:50}},data:function(){return{guard:1}},computed:{children:function(){return this.defaultChildren},tableData:function(){var e=this.data;return 0===this.data.length?[]:(d(e,{expand:this.defaultExpandAll,children:this.defaultChildren}),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"children\",a=[];return t.forEach(function(t,r){if(i.default.set(t,\"_index\",r),a.push(t),t[n]&&t[n].length>0){var d=e(t[n],n);a=a.concat(d)}}),a}(e,this.defaultChildren))}},methods:{addBrother:function(e,t){e._parent?e._parent.children.push(t):this.data.push(t)},addChild:function(e,t){e.children||this.$set(e,\"children\",[]),e.children.push(t)},delete:function(e){var t=e._index,n=e._parent;n?n.children.splice(t,1):this.data.splice(t,1)},getData:function(){return this.tableData},showRow:function(e){var t=e.row,n=t._parent,a=!n||n._expand&&n._show;return t._show=a,a?\"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;\":\"display:none;\"},showSperadIcon:function(e){return e[this.children]&&e[this.children].length>0},toggleExpanded:function(e){var t=this.tableData[e],n=!t._expand;t._expand=n},handleCheckAllChange:function(e){this.selcetRecursion(e,e._select,this.defaultChildren),this.isIndeterminate=e._select},selcetRecursion:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"children\";t&&(this.$set(e,\"_expand\",!0),this.$set(e,\"_show\",!0));var r=e[a];r&&r.length>0&&r.map(function(e){e._select=t,n.selcetRecursion(e,t,a)})},updateTreeNode:function(e){var t=this;return new r.a(function(n){var a=e._id,r=e._parent,i=a.split(\"-\").slice(-1)[0];r?(r.children.splice(i,1,e),n(t.data)):(t.data.splice(i,1,e),n(t.data))})}}},o=(n(\"x7Y3\"),n(\"KHd+\")),s=Object(o.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"el-table\",e._g(e._b({attrs:{data:e.tableData,\"row-style\":e.showRow}},\"el-table\",e.$attrs,!1),e.$listeners),[e._t(\"selection\"),e._v(\" \"),e._t(\"pre-column\"),e._v(\" \"),e._l(e.columns,function(t){return n(\"el-table-column\",{key:t.key,attrs:{label:t.label,width:t.width,align:t.align||\"center\",\"header-align\":t.headerAlign},scopedSlots:e._u([{key:\"default\",fn:function(a){return[e._t(t.key,[t.expand?[n(\"span\",{style:{\"padding-left\":+a.row._level*e.indent+\"px\"}}),e._v(\" \"),n(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showSperadIcon(a.row),expression:\"showSperadIcon(scope.row)\"}],staticClass:\"tree-ctrl\",on:{click:function(t){e.toggleExpanded(a.$index)}}},[a.row._expand?n(\"i\",{staticClass:\"el-icon-minus\"}):n(\"i\",{staticClass:\"el-icon-plus\"})])]:e._e(),e._v(\" \"),t.checkbox?[a.row[e.defaultChildren]&&a.row[e.defaultChildren].length>0?n(\"el-checkbox\",{style:{\"padding-left\":+a.row._level*e.indent+\"px\"},attrs:{indeterminate:a.row._select},on:{change:function(t){e.handleCheckAllChange(a.row)}},model:{value:a.row._select,callback:function(t){e.$set(a.row,\"_select\",t)},expression:\"scope.row._select\"}}):n(\"el-checkbox\",{style:{\"padding-left\":+a.row._level*e.indent+\"px\"},on:{change:function(t){e.handleCheckAllChange(a.row)}},model:{value:a.row._select,callback:function(t){e.$set(a.row,\"_select\",t)},expression:\"scope.row._select\"}})]:e._e(),e._v(\"\\n        \"+e._s(a.row[t.key])+\"\\n      \")],{scope:a})]}}])})})],2)},[],!1,null,null,null);s.options.__file=\"index.vue\";t.a=s.exports},x7Y3:function(e,t,n){\"use strict\";var a=n(\"1Xwi\");n.n(a).a}}]);","extractedComments":[]}